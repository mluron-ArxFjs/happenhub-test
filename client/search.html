<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example that shows off a responsive product landing page.">
    <title>HappenHub</title>

    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css" integrity="sha384-"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="./src/App.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.blockUI/2.66.0-2013.10.09/jquery.blockUI.js"></script>
    <script src="./../server/controllers/tmEventController.js"></script>
</head>

<body>

    <form class="pure-form pure-form-stacked">

        <label for="keyword">
            <h4>Search Events</h4>
        </label>
        <input id="keyword" type="text" placeholder="Type of Event/Keyword">

        <table>
            <td>
                <h4>Start Date</h4>
                <input id="startDate" type="date" name="startdate" placeholder="Start Date">
            </td>
            <td>
                <h4>End Date</h4>
                <input id="endDate" type="date" name="enddate" placeholder="End Date">
            </td>
        </table>

        <label for="city">
            <h4>Location</h4>
        </label>
        <input id="location" type="text" placeholder="City or Zip Code">

        <button type="submit" class="pure-button-light" id="btnSubmit" onclick="tmEventSearch()">Search</button>
        <button type="reset" class="pure-button-light" id="btnReset" onclick="">Reset</button>

    </form>
    <div id="displayResults" class="displayResultsContainer"></div>

    <div><img src='./src/assets/pink-back.jpeg' height='400px'></div>

</body>
</html>
<script>
   $(document).ready(function () {

$('#btnSubmit').on('click', function (event) {
    event.preventDefault();
    var keyword = $("#keyword").val().trim();
    var startDate = $("#startDate").val().trim();
    var endDate = $("#endDate").val().trim();
    var location = $("#location").val().trim();
    if (localStorage.getItem("windowLatitude") !== null || localStorage.getItem("windowLongitude") !== null) {
        var currentLatitude = localStorage.getItem("windowLatitude");
        var currentLongitude = localStorage.getItem("windowLongitude");
    }
    else {
        var currentLatitude = windowLatitude;
        var currentLongitude = windowLongitude;
    }
    var myUserInput = new userInput(keyword, startDate, endDate, location, currentLatitude, currentLongitude);
    var mytmEventList = tmEventSearch(myUserInput);
    if (localStorage.getItem("tmEventListString") === null) {
        var mytmEventListString = JSON.stringify(mytmEventList);
        localStorage.setItem("tmEventListString", mytmEventListString);
    }
    else {
        localStorage.removeItem("tmEventListString");
        var mytmEventListString = JSON.stringify(mytmEventList);
        localStorage.setItem("tmEventListString", mytmEventListString);
    }
    displaySearchResult(mytmEventList);

});
})
$("#btnReset").on("click", function (event) {
event.preventDefault();
$("#displayResults").empty();
$("#keyword").val("");
$("#startDate").val("");
$("#endDate").val("");
$("#location").val("");
localStorage.removeItem("tmEventListString");
window.location.href = "main.html";
}) 
</script>